"use strict";(()=>{var a=class{create(){}},d=class extends a{static fnName="button";text;clickCb=()=>{};constructor(e){super(),this.text=e}onClick(e){this.clickCb=e}create(){let e=document.createElement("button");return e.textContent=this.text,e.onclick=this.clickCb,e}},g=class extends a{static fnName="valueDisplay";valueGetter;currentValue;constructor(e){super(),this.valueGetter=e,this.currentValue=e()}pollIntervalMs=100;withPollInterval(e){this.pollIntervalMs=e}create(){let e=document.createElement("div"),n=setInterval(()=>{this.currentValue=this.valueGetter(),e.textContent=JSON.stringify(this.currentValue)},this.pollIntervalMs);return new FinalizationRegistry(()=>{clearInterval(n)}).register(this,null),e}},T={$button:l=>new d(l),$valueDisplay:l=>new g(l)};Object.assign(window,T);var u=class{root=new Map;insert(e,n){if(e.length===0)throw new Error("Key length cannot be 0");let t=this.root;for(let r=0;r<e.length-2;r++){let i=e[r];t.has(i)||t.set(i,new Map);let c=t.get(i);if(c instanceof a)throw new Error(`${e.slice(0,r).join("/")} already leads to a widget, so ${e.join("/")} is not a valid key.`);t=c}t.set(e.at(-1),n)}collapseToHTML(e,n){function t(r,i){for(let[c,o]of r.entries()){let s;if(o instanceof a)s=o.create();else{let{branchEl:E,widgetParentEl:b}=n(c);t(o,b),s=E}i.appendChild(s)}return i}return t(this.root,e)}},m=class{container;tree;constructor(){this.container=document.createElement("div"),this.tree=new u}render(){let e=document.createElement("div"),n=t=>{let r=document.createElement("div"),i=document.createElement("div");r.appendChild(i);let c=document.createElement("div");return{branchEl:r,widgetParentEl:c}};this.tree.collapseToHTML(e,n),document.body.appendChild(this.container)}add(e,n){typeof e=="string"&&(e=[e]),this.tree.insert(e,n)}},h=new m;window.dbgui=()=>(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{h.render()},{once:!0}):h.render(),h);var f=window.dbgui;})();
