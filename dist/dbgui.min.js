function mkStyle$$module$dist$util(a){return Object.entries(a).reduce((c,[b,d])=>c+`${b}:${d};`,"")}function buttonStyle$$module$dist$util(){return{all:"unset",padding:"3px",background:"rgb(150 150 150)","font-family":'"IBM Plex Mono", monospace',display:"flex","text-align":"center"}}function elWithStyle$$module$dist$util(a,c="div"){c=document.createElement(c);c.style.cssText=mkStyle$$module$dist$util(a);return c}var module$dist$util={};module$dist$util.buttonStyle=buttonStyle$$module$dist$util;
module$dist$util.elWithStyle=elWithStyle$$module$dist$util;module$dist$util.mkStyle=mkStyle$$module$dist$util;class Widget$$module$dist$widgets{create(){}}class Button$$module$dist$widgets extends Widget$$module$dist$widgets{text;clickCb=()=>{};constructor(a="Click"){super();this.text=a}onClick(a){this.clickCb=a;return this}create(){let a=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");a.textContent=this.text;a.onclick=this.clickCb;return a}}
class ValueDisplay$$module$dist$widgets extends Widget$$module$dist$widgets{valueGetter;currentValue;constructor(a){super();this.valueGetter=a;this.currentValue=a()}pollInterval=100;withPollInterval(a){this.pollInterval=a;return this}stringifyFn=a=>a+"";withStringifyFunction(a){this.stringifyFn=a;return this}create(){let a=elWithStyle$$module$dist$util({display:"flex","flex-direction":"row","align-items":"center",gap:"3px"}),c=elWithStyle$$module$dist$util({});c.textContent=this.stringifyFn(this.valueGetter());
const b=()=>{c.textContent="...";this.currentValue=this.valueGetter();c.textContent=this.stringifyFn(this.currentValue)};a.append(c);if(this.pollInterval==="manual"){let d=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");d.textContent="Update";d.onclick=b;a.append(d)}else{let d=setInterval(()=>{b()},this.pollInterval);(new FinalizationRegistry(()=>{clearInterval(d)})).register(a,null)}return a}}
class TextInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;textInputEl=void 0;getText=()=>"";constructor(a){super();this.getText=a?a:()=>this.textInputEl?.value??""}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=this.textInputEl=elWithStyle$$module$dist$util({"min-width":"0","max-width":"80px"},"input");a.value=this.getText();let c=!1;a.addEventListener("focus",()=>c=!0);a.addEventListener("blur",
()=>c=!0);a.addEventListener("input",()=>this.onInputCb(a.value));a.addEventListener("change",()=>this.onChangeCb(a.value));setTimeout(()=>{c||(a.value=this.getText())},this.pollIntervalMs);return a}}
class NumberInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;numberInputEl=void 0;getNumber=()=>0;constructor(a){super();this.getNumber=a?a:()=>+(this.numberInputEl?.value??0)}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=this.numberInputEl=elWithStyle$$module$dist$util({"min-width":"0","max-width":"80px"},"input");a.type="number";a.value=this.getNumber()+"";let c=!1;a.addEventListener("focus",
()=>c=!0);a.addEventListener("blur",()=>c=!0);a.addEventListener("input",()=>this.onInputCb(+a.value));a.addEventListener("change",()=>this.onChangeCb(+a.value));setTimeout(()=>{c||(a.value=this.getNumber()+"")},this.pollIntervalMs);return a}}
class RangeInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;min;max;step;getNumber=()=>0;constructor(a=0,c=100,b=1,d){super();this.min=a;this.max=c;this.step=b;d&&(this.getNumber=d)}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}create(){let a=elWithStyle$$module$dist$util({});a.textContent=this.min+"";let c=elWithStyle$$module$dist$util({});c.textContent=this.max+"";let b=elWithStyle$$module$dist$util({"max-width":"80px",
"min-width":"0",width:"80px",flex:"1"},"input");b.type="range";b.value=this.getNumber()+"";b.min=this.min+"";b.max=this.max+"";b.step=this.step+"";let d=!1;b.addEventListener("focus",()=>d=!0);b.addEventListener("blur",()=>d=!0);b.addEventListener("input",()=>this.onInputCb(+b.value));b.addEventListener("change",()=>this.onChangeCb(+b.value));setTimeout(()=>{d||(b.value=this.getNumber()+"")},this.pollIntervalMs);let f=elWithStyle$$module$dist$util({display:"flex","min-width":"0","align-items":"center"});
f.append(a,b,c);return f}}class Group$$module$dist$widgets extends Widget$$module$dist$widgets{children;constructor(...a){super();this.children=a}direction="row";withDir(a){this.direction=a;return this}create(){let a=elWithStyle$$module$dist$util({display:"flex","flex-direction":this.direction,"flex-wrap":"wrap","justify-content":"flex-end","align-items":"center",gap:"5px","min-width":"0"});this.children.forEach(c=>a.append(c.create()));return a}}
let widgets$$module$dist$widgets={$button:a=>new Button$$module$dist$widgets(a),$valueDisplay:a=>new ValueDisplay$$module$dist$widgets(a),$text:a=>new TextInput$$module$dist$widgets(a),$input:a=>new TextInput$$module$dist$widgets(a),$number:a=>new NumberInput$$module$dist$widgets(a),$range:(a,c,b,d)=>new RangeInput$$module$dist$widgets(a,c,b,d),$slider:(a,c,b,d)=>new RangeInput$$module$dist$widgets(a,c,b,d),$group:(...a)=>new Group$$module$dist$widgets(...a)};Object.assign(window,widgets$$module$dist$widgets);
var module$dist$widgets={};module$dist$widgets.Widget=Widget$$module$dist$widgets;let url$$module$dist$dbgui=new URL(location.href),config$$module$dist$dbgui={fontSize:url$$module$dist$dbgui.searchParams.get("fontSize")||"14"};const dbguiRowClass$$module$dist$dbgui="__DBGUI_INJECTED_row",dbguiCategoryClass$$module$dist$dbgui="__DBGUI_INJECTED_category",styleTag$$module$dist$dbgui=document.createElement("style");styleTag$$module$dist$dbgui.innerHTML=`.${dbguiRowClass$$module$dist$dbgui}:nth-of-type(2n):not(.${dbguiCategoryClass$$module$dist$dbgui}),.${dbguiRowClass$$module$dist$dbgui}.${dbguiCategoryClass$$module$dist$dbgui}:nth-of-type(2n)>summary{background-color:rgb(200 200 200)}`;
document.head.insertAdjacentElement("beforeend",styleTag$$module$dist$dbgui);
class DbgUICategory$$module$dist$dbgui{static cache=new Map;categoryEl;widgetsContainerEl;constructor(a){this.categoryEl=document.createElement("details");this.categoryEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column"});this.categoryEl.classList.add(dbguiRowClass$$module$dist$dbgui,dbguiCategoryClass$$module$dist$dbgui);this.categoryEl.dataset.categoryName=sanitizeQuotedString$$module$dist$dbgui(a);let c=document.createElement("summary");c.textContent=a;this.widgetsContainerEl=
elWithStyle$$module$dist$util({width:"100%"});this.categoryEl.append(c,this.widgetsContainerEl)}static of(a,c){if(DbgUICategory$$module$dist$dbgui.cache.has(a))return DbgUICategory$$module$dist$dbgui.cache.get(a);let b=new DbgUICategory$$module$dist$dbgui(a);insertElIntoSortedChildren$$module$dist$dbgui(c.categoriesContainerEl,b.categoryEl,a,d=>d.dataset.categoryName);DbgUICategory$$module$dist$dbgui.cache.set(a,b);return b}add(a,c){let b=this.widgetsContainerEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);
if(c===null)b&&b.remove();else{c=createWidgetContainer$$module$dist$dbgui(a,c);if(b)return b.replaceWith(c),this;insertElIntoSortedChildren$$module$dist$dbgui(this.widgetsContainerEl,c,a,d=>d.dataset.key)}return this}}
function insertElIntoSortedChildren$$module$dist$dbgui(a,c,b,d){if(a.children.length===0)a.append(c);else{for(var f=a.children.length,e=0;f!=e;){let g=Math.floor((e+f)/2);b>d(a.children[g])?e=g+1:f=g}a.children.length===e?a.append(c):a.children[e].insertAdjacentElement("beforebegin",c)}}
class DbgUI$$module$dist$dbgui{container;moveHandle;resizeHandles;contents;nonCategorizedWidgetsEl;categoriesContainerEl;constructor(){let a,c={x:10,y:10,width:Math.max(250,window.innerWidth*3/5-20),height:Math.max(300,window.innerHeight*4/5-20),minWidth:100,minHeight:100,maxWidth:350,maxHeight:400,resizeN(b){b>=0?this.y===window.innerHeight-10-this.height?this.height-b>this.minHeight?(this.height-=b,this.y+=b):(this.height=this.minHeight,this.y=window.innerHeight-(10+this.height)):this.height===
this.minHeight?this.y=window.innerHeight-10<this.y+this.height+b?window.innerHeight-10-this.height:this.y+b:this.y+this.height+10+b>window.innerHeight?this.y=window.innerHeight-(10+this.height):this.height-b<=this.minHeight?(b=this.minHeight-(this.height-b),this.height=this.minHeight,this.y+=b):(this.height-=b,this.y+=b):this.y!==10&&(this.height===this.maxHeight?this.y=this.y+b<10?10:this.y+b:this.y+b<10?(this.height-=this.y+b-10,this.y=10):(this.height-=b,this.y+=b));this.update()},resizeS(b){b>=
0?this.y!==window.innerHeight-10&&(this.height===this.maxHeight?this.y=Math.min(this.y+b,window.innerHeight-10-this.height):this.height=Math.min(this.height+b,this.maxHeight,window.innerHeight-10-this.y)):this.y===10?this.height=Math.max(this.height+b,this.minHeight):this.height===this.minHeight?this.y=Math.max(this.y+b,10):this.height=Math.max(this.height+b,this.minHeight);this.update()},resizeW(b){b<=0?this.x!==10&&(this.width===this.maxWidth?this.x=Math.max(this.x+b,10):(b=Math.min(this.width-
b,this.maxWidth,this.x+this.width-10),this.x=this.x+this.width-b,this.width=b)):this.x+this.width===window.innerWidth-10?this.width=Math.max(this.width-b,this.minWidth):this.width===this.minWidth?this.x=Math.min(this.x+b,window.innerWidth-10-this.width):(b=Math.max(this.width-b,this.minWidth),this.x+=this.width-b,this.width=b);this.update()},resizeE(b){b>=0?this.x+this.width!==window.innerWidth-10&&(this.width===this.maxWidth?this.x=Math.min(this.x+b,window.innerWidth-10-this.width):this.width=Math.min(this.width+
b,this.maxWidth,window.innerWidth-10-this.x)):this.x===10?this.width=Math.max(this.width+b,this.minWidth):this.width===this.minWidth?this.x=Math.max(this.x+b,10):this.width=Math.max(this.width+b,this.minWidth);this.update()},update(){a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.width=a.style.maxWidth=this.width+"px";a.style.height=a.style.maxHeight=this.height+"px"}};a=this.container=elWithStyle$$module$dist$util({position:"fixed",display:"grid",grid:'"nw n ne" 6px "w c e" 1fr "sw s se" 6px / 6px 1fr 6px',
left:c.x+"px",top:c.y+"px",width:c.width+"px","max-width":c.width+"px",height:c.height+"px","max-height":c.height+"px","user-select":"none",background:"rgb(230 230 230 / .7)"});this.moveHandle=elWithStyle$$module$dist$util({background:"beige"});this.resizeHandles="n ne e se s sw w nw".split(" ").map(b=>{let d=elWithStyle$$module$dist$util({"grid-area":b,cursor:`${b}-resize`,background:"black"}),f=!1;d.addEventListener("pointerdown",e=>{f=!0});window.addEventListener("pointermove",e=>{if(f){switch(!0){case b.includes("n"):c.resizeN(e.movementY);
break;case b.includes("s"):c.resizeS(e.movementY)}switch(!0){case b.includes("e"):c.resizeE(e.movementX);break;case b.includes("w"):c.resizeW(e.movementX)}}});window.addEventListener("pointerup",()=>{f=!1});return d});this.contents=document.createElement("div");this.contents.style.cssText=mkStyle$$module$dist$util({"grid-area":"c","font-family":'"IBM Plex Mono", monospace',"font-size":config$$module$dist$dbgui.fontSize+"px",display:"flex","flex-direction":"column",padding:"6px","min-width":"0px",
"max-width":"100%",overflow:"hidden auto",gap:"3px"});this.container.append(this.contents,...this.resizeHandles);this.nonCategorizedWidgetsEl=document.createElement("div");this.nonCategorizedWidgetsEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column",width:"100%","max-height":"40%",overflow:"hidden auto",gap:"3px"});this.categoriesContainerEl=document.createElement("div");this.categoriesContainerEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column",
width:"100%",flex:"1",overflow:"hidden auto",gap:"3px"});this.contents.append(this.nonCategorizedWidgetsEl,this.categoriesContainerEl)}_addToDocument(){document.body.appendChild(this.container)}add(a,c){let b=this.nonCategorizedWidgetsEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);if(c===null)b&&b.remove();else{c=createWidgetContainer$$module$dist$dbgui(a,c);if(b)return b.replaceWith(c),this;insertElIntoSortedChildren$$module$dist$dbgui(this.nonCategorizedWidgetsEl,
c,a,d=>d.dataset.key)}return this}in(a){return DbgUICategory$$module$dist$dbgui.of(a,this)}addIn(a,c,b){this.in(a).add(c,b);return this}show(){this.container.style.display="grid"}hide(){this.container.style.display="none"}}
function createWidgetContainer$$module$dist$dbgui(a,c){var b=c.create();c=elWithStyle$$module$dist$util({flex:"1","min-width":"0",display:"flex","justify-content":"end","font-size":+config$$module$dist$dbgui.fontSize*.8+"px"});c.append(b);b=document.createElement("div");b.style.cssText=mkStyle$$module$dist$util({"min-width":"0","max-width":"50%","overflow-wrap":"anywhere","text-overflow":"ellipsis"});b.textContent=a;let d=document.createElement("div");d.style.cssText=mkStyle$$module$dist$util({width:"100%",
"overflow-y":"hidden","overflow-x":"auto",display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"start","flex-wrap":"nowrap",flex:"none"});d.classList.add(dbguiRowClass$$module$dist$dbgui);d.append(b,c);d.dataset.key=a;return d}function sanitizeQuotedString$$module$dist$dbgui(a){return a.replaceAll("\\","\\\\").replaceAll('"','\\"')}let dbgUISingleton$$module$dist$dbgui=new DbgUI$$module$dist$dbgui;
window.dbgui=()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{dbgUISingleton$$module$dist$dbgui._addToDocument()},{once:!0}):dbgUISingleton$$module$dist$dbgui._addToDocument();return dbgUISingleton$$module$dist$dbgui};const fontFace$$module$dist$dbgui=new FontFace("IBM Plex Mono","url(https://fonts.gstatic.com/s/ibmplexmono/v19/-F63fjptAgt5VM-kVkqdyU8n1i8q1w.woff2)");document.fonts.add(fontFace$$module$dist$dbgui);fontFace$$module$dist$dbgui.load();
var module$dist$dbgui={};
