function mkStyle$$module$dist$util(a){return Object.entries(a).reduce((c,[b,d])=>c+`${b}:${d};`,"")}function buttonStyle$$module$dist$util(){return{all:"unset",padding:"2px",background:"rgb(100 100 100)","font-family":'"IBM Plex Mono", monospace'}}function elWithStyle$$module$dist$util(a,c="div"){c=document.createElement(c);c.style.cssText=mkStyle$$module$dist$util(a);return c}var module$dist$util={};module$dist$util.buttonStyle=buttonStyle$$module$dist$util;module$dist$util.elWithStyle=elWithStyle$$module$dist$util;
module$dist$util.mkStyle=mkStyle$$module$dist$util;class Widget$$module$dist$widgets{create(){}}class Button$$module$dist$widgets extends Widget$$module$dist$widgets{text;clickCb=()=>{};constructor(a){super();this.text=a}onClick(a){this.clickCb=a;return this}create(){let a=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");a.textContent=this.text;a.onclick=this.clickCb;return a}}
class ValueDisplay$$module$dist$widgets extends Widget$$module$dist$widgets{valueGetter;currentValue;constructor(a){super();this.valueGetter=a;this.currentValue=a()}pollInterval=100;withPollInterval(a){this.pollInterval=a;return this}_repAsJson=!0;repAsJSON(a){this._repAsJson=a;return this}repAsJson(a){return this.repAsJSON(a)}create(){let a=elWithStyle$$module$dist$util({display:"flex","flex-direction":"row"});if(this.pollInterval==="manual"){let c=elWithStyle$$module$dist$util({});c.textContent=
JSON.stringify(this.valueGetter(),null,2);let b=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");b.textContent="Update";b.onclick=()=>{c.textContent="...";this.currentValue=this.valueGetter();c.textContent=this._repAsJson?JSON.stringify(this.currentValue,null,2):this.currentValue+""};a.append(c,b)}else{let c=setInterval(()=>{this.currentValue=this.valueGetter();a.textContent=this._repAsJson?JSON.stringify(this.currentValue,null,2):this.currentValue+""},this.pollInterval);
(new FinalizationRegistry(()=>{clearInterval(c)})).register(a,null)}return a}}
class TextInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;getText=()=>"";constructor(a){super();a&&(this.getText=a)}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=elWithStyle$$module$dist$util({},"input");a.value=this.getText();let c=!1;a.addEventListener("focus",()=>c=!0);a.addEventListener("blur",()=>c=!0);a.addEventListener("input",()=>this.onInputCb(a.value));a.addEventListener("change",
()=>this.onChangeCb(a.value));setTimeout(()=>{c||(a.value=this.getText())},this.pollIntervalMs);return a}}
class NumberInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;getNumber=()=>0;constructor(a){super();a&&(this.getNumber=a)}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=elWithStyle$$module$dist$util({},"input");a.type="number";a.value=this.getNumber()+"";let c=!1;a.addEventListener("focus",()=>c=!0);a.addEventListener("blur",()=>c=!0);a.addEventListener("input",()=>this.onInputCb(a.value));
a.addEventListener("change",()=>this.onChangeCb(a.value));setTimeout(()=>{c||(a.value=this.getNumber()+"")},this.pollIntervalMs);return a}}
class RangeInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;min;max;step;getNumber=()=>0;constructor(a=0,c=100,b=1,d){super();this.min=a;this.max=c;this.step=b;d&&(this.getNumber=d)}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}create(){let a=elWithStyle$$module$dist$util({},"input");a.type="range";a.value=this.getNumber()+"";a.min=this.min+"";a.max=this.max+"";a.step=this.step+"";let c=!1;a.addEventListener("focus",
()=>c=!0);a.addEventListener("blur",()=>c=!0);a.addEventListener("input",()=>this.onInputCb(a.value));a.addEventListener("change",()=>this.onChangeCb(a.value));setTimeout(()=>{c||(a.value=this.getNumber()+"")},this.pollIntervalMs);return a}}
let widgets$$module$dist$widgets={$button:a=>new Button$$module$dist$widgets(a),$valueDisplay:a=>new ValueDisplay$$module$dist$widgets(a),$text:a=>new TextInput$$module$dist$widgets(a),$input:a=>new TextInput$$module$dist$widgets(a),$number:a=>new NumberInput$$module$dist$widgets(a),$range:(a,c,b,d)=>new RangeInput$$module$dist$widgets(a,c,b,d),$slider:(a,c,b,d)=>new RangeInput$$module$dist$widgets(a,c,b,d)};Object.assign(window,widgets$$module$dist$widgets);var module$dist$widgets={};
module$dist$widgets.Widget=Widget$$module$dist$widgets;let url$$module$dist$dbgui=new URL(location.href),config$$module$dist$dbgui={fontSize:url$$module$dist$dbgui.searchParams.get("fontSize")||"14"};
class DbgUICategory$$module$dist$dbgui{static cache=new Map;categoryEl;widgetsContainerEl;constructor(a){this.categoryEl=document.createElement("details");this.categoryEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column"});this.categoryEl.dataset.categoryName=sanitizeQuotedString$$module$dist$dbgui(a);let c=document.createElement("summary");c.textContent=a;this.widgetsContainerEl=elWithStyle$$module$dist$util({width:"100%",overflow:"hidden"});this.categoryEl.append(c,
this.widgetsContainerEl)}static of(a,c){if(DbgUICategory$$module$dist$dbgui.cache.has(a))return DbgUICategory$$module$dist$dbgui.cache.get(a);let b=new DbgUICategory$$module$dist$dbgui(a);insertElIntoSortedChildren$$module$dist$dbgui(c.categoriesContainerEl,b.categoryEl,a,d=>d.dataset.categoryName);DbgUICategory$$module$dist$dbgui.cache.set(a,b);return b}add(a,c){c=createWidgetContainer$$module$dist$dbgui(a,c);let b=this.widgetsContainerEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);
if(b)return b.replaceWith(c),this;insertElIntoSortedChildren$$module$dist$dbgui(this.widgetsContainerEl,c,a,d=>d.dataset.key);return this}}function insertElIntoSortedChildren$$module$dist$dbgui(a,c,b,d){if(a.children.length===0)a.append(c);else{for(var f=a.children.length,e=0;f!=e;){let g=Math.floor((e+f)/2);b>d(a.children[g])?e=g+1:f=g}a.children.length===e?a.append(c):a.children[e].insertAdjacentElement("beforebegin",c)}}
class DbgUI$$module$dist$dbgui{container;moveHandle;resizeHandles;contents;nonCategorizedWidgetsEl;categoriesContainerEl;constructor(){let a,c={x:40,y:40,width:250,height:300,minWidth:100,minHeight:100,maxWidth:350,maxHeight:400,resizeN(b){b>=0?this.y===window.innerHeight-40-this.height?this.height-b>this.minHeight?(this.height-=b,this.y+=b):(this.height=this.minHeight,this.y=window.innerHeight-(40+this.height)):this.height===this.minHeight?this.y=window.innerHeight-40<this.y+this.height+b?window.innerHeight-
40-this.height:this.y+b:this.y+this.height+40+b>window.innerHeight?this.y=window.innerHeight-(40+this.height):this.height-b<=this.minHeight?(b=this.minHeight-(this.height-b),this.height=this.minHeight,this.y+=b):(this.height-=b,this.y+=b):this.y!==40&&(this.height===this.maxHeight?this.y=this.y+b<40?40:this.y+b:(this.y=this.y+b<40?40:this.y+b,this.height=this.height-b>this.maxHeight?this.maxHeight:this.height-b));this.update()},resizeS(b){b>=0?this.y!==window.innerHeight-40&&(this.height===this.maxHeight?
this.y=Math.min(this.y+b,window.innerHeight-40-this.height):this.height=Math.min(this.height+b,this.maxHeight,window.innerHeight-40-this.y)):this.y===40?this.height=Math.max(this.height+b,this.minHeight):this.height===this.minHeight?this.y=Math.max(this.y+b,40):this.height=Math.max(this.height+b,this.minHeight);this.update()},resizeW(b){b<=0?this.x!==40&&(this.width===this.maxWidth?this.x=Math.max(this.x+b,40):(b=Math.min(this.width-b,this.maxWidth,this.x+this.width-40),this.x=this.x+this.width-b,
this.width=b)):this.x+this.width===window.innerWidth-40?this.width=Math.max(this.width-b,this.minWidth):this.width===this.minWidth?this.x=Math.min(this.x+b,window.innerWidth-40-this.width):(b=Math.max(this.width-b,this.minWidth),this.x+=this.width-b,this.width=b);this.update()},resizeE(b){b>=0?this.x+this.width!==window.innerWidth-40&&(this.width===this.maxWidth?this.x=Math.min(this.x+b,window.innerWidth-40-this.width):this.width=Math.min(this.width+b,this.maxWidth,window.innerWidth-40-this.x)):this.x===
40?this.width=Math.max(this.width+b,this.minWidth):this.width===this.minWidth?this.x=Math.max(this.x+b,40):this.width=Math.max(this.width+b,this.minWidth);this.update()},update(){a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.width=a.style.maxWidth=this.width+"px";a.style.height=a.style.maxHeight=this.height+"px"}};a=this.container=elWithStyle$$module$dist$util({position:"fixed",display:"grid",grid:'"nw n ne" 20px "w c e" 1fr "sw s se" 20px / 20px 1fr 20px',left:c.x+"px",top:c.y+"px",width:c.width+
"px","max-width":c.width+"px",height:c.height+"px","max-height":c.height+"px","user-select":"none"});this.moveHandle=elWithStyle$$module$dist$util({background:"beige"});this.resizeHandles="n ne e se s sw w nw".split(" ").map(b=>{let d=elWithStyle$$module$dist$util({"grid-area":b,cursor:`${b}-resize`,background:"black"}),f=!1;d.addEventListener("pointerdown",e=>{f=!0});window.addEventListener("pointermove",e=>{if(f){switch(!0){case b.includes("n"):c.resizeN(e.movementY);break;case b.includes("s"):c.resizeS(e.movementY)}switch(!0){case b.includes("e"):c.resizeE(e.movementX);
break;case b.includes("w"):c.resizeW(e.movementX)}}});window.addEventListener("pointerup",()=>{f=!1});return d});this.contents=document.createElement("div");this.contents.style.cssText=mkStyle$$module$dist$util({"grid-area":"c","font-family":'"IBM Plex Mono", monospace',"font-size":config$$module$dist$dbgui.fontSize+"px",display:"flex","flex-direction":"column",padding:"6px","min-width":"0px","max-width":"100%",overflow:"hidden"});this.container.append(this.contents,...this.resizeHandles);this.nonCategorizedWidgetsEl=
document.createElement("div");this.nonCategorizedWidgetsEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column",width:"100%",height:"40%","overflow-y":"auto"});this.categoriesContainerEl=document.createElement("div");this.categoriesContainerEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column",width:"100%",flex:"1","overflow-y":"auto"});this.contents.append(this.nonCategorizedWidgetsEl,this.categoriesContainerEl)}_addToDocument(){document.body.appendChild(this.container)}add(a,
c){c=createWidgetContainer$$module$dist$dbgui(a,c);let b=this.nonCategorizedWidgetsEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);if(b)return b.replaceWith(c),this;insertElIntoSortedChildren$$module$dist$dbgui(this.nonCategorizedWidgetsEl,c,a,d=>d.dataset.key);return this}in(a){return DbgUICategory$$module$dist$dbgui.of(a,this)}}
function createWidgetContainer$$module$dist$dbgui(a,c){var b=c.create();c=elWithStyle$$module$dist$util({overflow:"auto",display:"flex"});c.append(b);b=document.createElement("div");b.style.cssText=mkStyle$$module$dist$util({flex:"1","max-width":"60%","overflow-wrap":"anywhere","text-overflow":"ellipsis"});b.textContent=a;let d=document.createElement("div");d.style.cssText=mkStyle$$module$dist$util({width:"100%",overflow:"hidden",display:"flex","flex-direction":"row","justify-content":"space-between"});
d.append(b,c);d.dataset.key=a;return d}function sanitizeQuotedString$$module$dist$dbgui(a){return a.replaceAll("\\","\\\\").replaceAll('"','\\"')}let dbgUISingleton$$module$dist$dbgui=new DbgUI$$module$dist$dbgui;window.dbgui=()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{dbgUISingleton$$module$dist$dbgui._addToDocument()},{once:!0}):dbgUISingleton$$module$dist$dbgui._addToDocument();return dbgUISingleton$$module$dist$dbgui};
const fontFace$$module$dist$dbgui=new FontFace("IBM Plex Mono","url(https://fonts.gstatic.com/s/ibmplexmono/v19/-F63fjptAgt5VM-kVkqdyU8n1i8q1w.woff2)");document.fonts.add(fontFace$$module$dist$dbgui);fontFace$$module$dist$dbgui.load();var module$dist$dbgui={};
