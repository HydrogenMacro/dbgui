function mkStyle$$module$dist$util(a){return Object.entries(a).reduce((b,[d,e])=>b+`${d}:${e};`,"")}function buttonStyle$$module$dist$util(){return{all:"unset",padding:"3px",background:"rgb(150 150 150)","font-family":'"IBM Plex Mono", monospace',display:"flex","text-align":"center"}}function elWithStyle$$module$dist$util(a,b="div"){b=document.createElement(b);b.style.cssText=mkStyle$$module$dist$util(a);return b}var module$dist$util={};module$dist$util.buttonStyle=buttonStyle$$module$dist$util;
module$dist$util.elWithStyle=elWithStyle$$module$dist$util;module$dist$util.mkStyle=mkStyle$$module$dist$util;class Widget$$module$dist$widgets{create(){}}class Button$$module$dist$widgets extends Widget$$module$dist$widgets{text;clickCb=()=>{};constructor(a="Click"){super();this.text=a}onClick(a){this.clickCb=a;return this}create(){let a=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");a.textContent=this.text;a.onclick=this.clickCb;return a}}
class ValueDisplay$$module$dist$widgets extends Widget$$module$dist$widgets{valueGetter;currentValue;constructor(a){super();this.valueGetter=a;this.currentValue=a()}pollInterval=100;withPollInterval(a){this.pollInterval=a;return this}stringifyFn=a=>a+"";withStringifyFunction(a){this.stringifyFn=a;return this}create(){let a=elWithStyle$$module$dist$util({display:"flex","flex-direction":"row","align-items":"center",gap:"3px"}),b=elWithStyle$$module$dist$util({});b.textContent=this.stringifyFn(this.valueGetter());
const d=()=>{b.textContent="...";this.currentValue=this.valueGetter();b.textContent=this.stringifyFn(this.currentValue)};a.append(b);if(this.pollInterval==="manual"){let e=elWithStyle$$module$dist$util({...buttonStyle$$module$dist$util()},"button");e.textContent="Update";e.onclick=d;a.append(e)}else{let e=setInterval(()=>{d()},this.pollInterval);(new FinalizationRegistry(()=>{clearInterval(e)})).register(a,null)}return a}}
class TextInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;textInputEl=void 0;getText=()=>"";constructor(a){super();this.getText=a?a:()=>this.textInputEl?.value??""}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=this.textInputEl=elWithStyle$$module$dist$util({"min-width":"0","max-width":"80px"},"input");a.value=this.getText();let b=!1;a.addEventListener("focus",()=>b=!0);a.addEventListener("blur",
()=>b=!0);a.addEventListener("input",()=>this.onInputCb(a.value));a.addEventListener("change",()=>this.onChangeCb(a.value));setTimeout(()=>{b||(a.value=this.getText())},this.pollIntervalMs);return a}}
class NumberInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;numberInputEl=void 0;getNumber=()=>0;constructor(a){super();this.getNumber=a?a:()=>+(this.numberInputEl?.value??0)}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}create(){let a=this.numberInputEl=elWithStyle$$module$dist$util({all:"unset",padding:"0 2px","min-width":"0","max-width":"80px",background:"rgb(240 240 240)",border:"solid 1px rgb(60 60 60)"},
"input");a.type="number";a.value=this.getNumber()+"";let b=!1;a.addEventListener("focus",()=>b=!0);a.addEventListener("blur",()=>b=!0);a.addEventListener("input",()=>this.onInputCb(+a.value));a.addEventListener("change",()=>this.onChangeCb(+a.value));setTimeout(()=>{b||(a.value=this.getNumber()+"")},this.pollIntervalMs);return a}}
class RangeInput$$module$dist$widgets extends Widget$$module$dist$widgets{pollIntervalMs=100;min;max;step;getNumber=()=>0;constructor(a=0,b=100,d=1,e){super();this.min=a;this.max=b;this.step=d;e&&(this.getNumber=e)}onChangeCb=a=>{};onChange(a){this.onChangeCb=a;return this}onInputCb=a=>{};onInput(a){this.onInputCb=a;return this}create(){let a=elWithStyle$$module$dist$util({});a.textContent=this.min+"";let b=elWithStyle$$module$dist$util({});b.textContent=this.max+"";let d=elWithStyle$$module$dist$util({all:"unset",
"max-width":"80px","min-width":"0",width:"80px",flex:"1",background:"#333333",height:"7px"},"input");d.type="range";d.value=this.getNumber()+"";d.min=this.min+"";d.max=this.max+"";d.step=this.step+"";let e=!1;d.addEventListener("focus",()=>e=!0);d.addEventListener("blur",()=>e=!0);d.addEventListener("input",()=>this.onInputCb(+d.value));d.addEventListener("change",()=>this.onChangeCb(+d.value));setTimeout(()=>{e||(d.value=this.getNumber()+"")},this.pollIntervalMs);let f=elWithStyle$$module$dist$util({display:"flex",
"min-width":"0","align-items":"center",gap:"5px"});f.append(a,d,b);return f}}
class Group$$module$dist$widgets extends Widget$$module$dist$widgets{children;constructor(...a){super();this.children=a}direction="row";withDir(a){this.direction=a;return this}create(){let a=elWithStyle$$module$dist$util({display:"flex","flex-direction":this.direction,"flex-wrap":"wrap","justify-content":"flex-end","align-items":"center",gap:"5px","min-width":"0"});this.children.forEach(b=>a.append(b.create()));return a}}
let widgets$$module$dist$widgets={$button:a=>new Button$$module$dist$widgets(a),$valueDisplay:a=>new ValueDisplay$$module$dist$widgets(a),$text:a=>new TextInput$$module$dist$widgets(a),$input:a=>new TextInput$$module$dist$widgets(a),$number:a=>new NumberInput$$module$dist$widgets(a),$range:(a,b,d,e)=>new RangeInput$$module$dist$widgets(a,b,d,e),$slider:(a,b,d,e)=>new RangeInput$$module$dist$widgets(a,b,d,e),$group:(...a)=>new Group$$module$dist$widgets(...a)};Object.assign(window,widgets$$module$dist$widgets);
var module$dist$widgets={};module$dist$widgets.Widget=Widget$$module$dist$widgets;let url$$module$dist$dbgui=new URL(location.href),config$$module$dist$dbgui={fontSize:url$$module$dist$dbgui.searchParams.get("fontSize")||"14"};const dbguiRowClass$$module$dist$dbgui="__DBGUI_INJECTED_row",dbguiCategoryClass$$module$dist$dbgui="__DBGUI_INJECTED_category",dbguiSummaryClass$$module$dist$dbgui="__DBGUI_INJECTED_summary",styleTag$$module$dist$dbgui=document.createElement("style");styleTag$$module$dist$dbgui.innerHTML=`.${dbguiRowClass$$module$dist$dbgui}:nth-of-type(2n):not(.${dbguiCategoryClass$$module$dist$dbgui}),.${dbguiRowClass$$module$dist$dbgui}.${dbguiCategoryClass$$module$dist$dbgui}:nth-of-type(2n)>summary{background-color:rgb(200 200 200) !important;}.${dbguiSummaryClass$$module$dist$dbgui}{list-style: inside disclosure-closed;}`;
document.head.insertAdjacentElement("beforeend",styleTag$$module$dist$dbgui);
class DbgUICategory$$module$dist$dbgui{static cache=new Map;categoryEl;widgetsContainerEl;constructor(a){this.categoryEl=document.createElement("details");this.categoryEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column"});this.categoryEl.classList.add(dbguiRowClass$$module$dist$dbgui,dbguiCategoryClass$$module$dist$dbgui);this.categoryEl.dataset.categoryName=sanitizeQuotedString$$module$dist$dbgui(a);let b=elWithStyle$$module$dist$util({},"summary");b.classList.add(dbguiSummaryClass$$module$dist$dbgui);
b.textContent=a;this.widgetsContainerEl=elWithStyle$$module$dist$util({width:"100%"});this.categoryEl.append(b,this.widgetsContainerEl)}static of(a,b){if(DbgUICategory$$module$dist$dbgui.cache.has(a))return DbgUICategory$$module$dist$dbgui.cache.get(a);let d=new DbgUICategory$$module$dist$dbgui(a);insertElIntoSortedChildren$$module$dist$dbgui(b.categoriesContainerEl,d.categoryEl,a,e=>e.dataset.categoryName);DbgUICategory$$module$dist$dbgui.cache.set(a,d);return d}add(a,b){let d=this.widgetsContainerEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);
if(b===null)d&&d.remove();else{b=createWidgetContainer$$module$dist$dbgui(a,b);if(d)return d.replaceWith(b),this;insertElIntoSortedChildren$$module$dist$dbgui(this.widgetsContainerEl,b,a,e=>e.dataset.key)}return this}}
function insertElIntoSortedChildren$$module$dist$dbgui(a,b,d,e){if(a.children.length===0)a.append(b);else{for(var f=a.children.length,c=0;f!=c;){let g=Math.floor((c+f)/2);d>e(a.children[g])?c=g+1:f=g}a.children.length===c?a.append(b):a.children[c].insertAdjacentElement("beforebegin",b)}}
class DbgUI$$module$dist$dbgui{container;moveHandle;resizeHandles;contents;nonCategorizedWidgetsEl;categoriesContainerEl;constructor(){let a,b=window.innerWidth-20,d=window.innerHeight-20,e=b<d?b:d,f={x:10,y:10,width:b*2/5,height:d*3/5,minWidth:e*1/6,minHeight:e*1/6,maxWidth:b*5/6,maxHeight:d*5/6,resizeN(c){c>=0?this.y===window.innerHeight-10-this.height?this.height-c>this.minHeight?(this.height-=c,this.y+=c):(this.height=this.minHeight,this.y=window.innerHeight-(10+this.height)):this.height===this.minHeight?
this.y=window.innerHeight-10<this.y+this.height+c?window.innerHeight-10-this.height:this.y+c:this.y+this.height+10+c>window.innerHeight?this.y=window.innerHeight-(10+this.height):this.height-c<=this.minHeight?(c=this.minHeight-(this.height-c),this.height=this.minHeight,this.y+=c):(this.height-=c,this.y+=c):this.y!==10&&(this.height===this.maxHeight?this.y=this.y+c<10?10:this.y+c:this.y+c<10?(this.height-=this.y+c-10,this.y=10):(this.height-=c,this.y+=c));this.update()},resizeS(c){c>=0?this.y!==window.innerHeight-
10&&(this.height===this.maxHeight?this.y=Math.min(this.y+c,window.innerHeight-10-this.height):this.height=Math.min(this.height+c,this.maxHeight,window.innerHeight-10-this.y)):this.y===10?this.height=Math.max(this.height+c,this.minHeight):this.height===this.minHeight?this.y=Math.max(this.y+c,10):this.height=Math.max(this.height+c,this.minHeight);this.update()},resizeW(c){c<=0?this.x!==10&&(this.width===this.maxWidth?this.x=Math.max(this.x+c,10):(c=Math.min(this.width-c,this.maxWidth,this.x+this.width-
10),this.x=this.x+this.width-c,this.width=c)):this.x+this.width===window.innerWidth-10?this.width=Math.max(this.width-c,this.minWidth):this.width===this.minWidth?this.x=Math.min(this.x+c,window.innerWidth-10-this.width):(c=Math.max(this.width-c,this.minWidth),this.x+=this.width-c,this.width=c);this.update()},resizeE(c){c>=0?this.x+this.width!==window.innerWidth-10&&(this.width===this.maxWidth?this.x=Math.min(this.x+c,window.innerWidth-10-this.width):this.width=Math.min(this.width+c,this.maxWidth,
window.innerWidth-10-this.x)):this.x===10?this.width=Math.max(this.width+c,this.minWidth):this.width===this.minWidth?this.x=Math.max(this.x+c,10):this.width=Math.max(this.width+c,this.minWidth);this.update()},update(){a.style.left=this.x+"px";a.style.top=this.y+"px";a.style.width=a.style.maxWidth=this.width+"px";a.style.height=a.style.maxHeight=this.height+"px"}};a=this.container=elWithStyle$$module$dist$util({position:"fixed",display:"grid",grid:'"nw n ne" 6px "w c e" 1fr "sw s se" 6px / 6px 1fr 6px',
left:f.x+"px",top:f.y+"px",width:f.width+"px","max-width":f.width+"px",height:f.height+"px","max-height":f.height+"px","user-select":"none",background:"rgb(230 230 230 / .7)"});this.moveHandle=elWithStyle$$module$dist$util({background:"beige"});this.resizeHandles="n ne e se s sw w nw".split(" ").map(c=>{let g=elWithStyle$$module$dist$util({"grid-area":c,cursor:`${c}-resize`,background:"black"}),k=!1;g.addEventListener("pointerdown",h=>{k=!0});window.addEventListener("pointermove",h=>{if(k){switch(!0){case c.includes("n"):f.resizeN(h.movementY);
break;case c.includes("s"):f.resizeS(h.movementY)}switch(!0){case c.includes("e"):f.resizeE(h.movementX);break;case c.includes("w"):f.resizeW(h.movementX)}}});window.addEventListener("pointerup",()=>{k=!1});return g});this.contents=document.createElement("div");this.contents.style.cssText=mkStyle$$module$dist$util({"grid-area":"c","font-family":'"IBM Plex Mono", monospace',"font-size":config$$module$dist$dbgui.fontSize+"px",display:"flex","flex-direction":"column",padding:"6px","min-width":"0px",
"max-width":"100%",overflow:"hidden auto",gap:"3px","user-select":"auto"});this.container.append(this.contents,...this.resizeHandles);this.nonCategorizedWidgetsEl=document.createElement("div");this.nonCategorizedWidgetsEl.style.cssText=mkStyle$$module$dist$util({display:"flex","flex-direction":"column",width:"100%","max-height":"40%",overflow:"hidden auto",gap:"3px"});this.categoriesContainerEl=document.createElement("div");this.categoriesContainerEl.style.cssText=mkStyle$$module$dist$util({display:"flex",
"flex-direction":"column",width:"100%",flex:"1",overflow:"hidden auto",gap:"3px"});this.contents.append(this.nonCategorizedWidgetsEl,this.categoriesContainerEl)}_addToDocument(){document.body.appendChild(this.container)}add(a,b){let d=this.nonCategorizedWidgetsEl.querySelector(`[data-key="${sanitizeQuotedString$$module$dist$dbgui(a)}"]`);if(b===null)d&&d.remove();else{b=createWidgetContainer$$module$dist$dbgui(a,b);if(d)return d.replaceWith(b),this;insertElIntoSortedChildren$$module$dist$dbgui(this.nonCategorizedWidgetsEl,
b,a,e=>e.dataset.key)}return this}in(a){return DbgUICategory$$module$dist$dbgui.of(a,this)}addIn(a,b,d){this.in(a).add(b,d);return this}show(){this.container.style.display="grid"}hide(){this.container.style.display="none"}}
function createWidgetContainer$$module$dist$dbgui(a,b){var d=b.create();b=elWithStyle$$module$dist$util({flex:"1","min-width":"0",display:"flex","justify-content":"end","font-size":+config$$module$dist$dbgui.fontSize*.8+"px","align-self":"center"});b.append(d);d=document.createElement("div");d.style.cssText=mkStyle$$module$dist$util({"min-width":"0","max-width":"50%","overflow-wrap":"anywhere","text-overflow":"ellipsis"});d.textContent=a;let e=document.createElement("div");e.style.cssText=mkStyle$$module$dist$util({width:"100%",
"overflow-y":"hidden","overflow-x":"auto",display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"start","flex-wrap":"nowrap",flex:"none"});e.classList.add(dbguiRowClass$$module$dist$dbgui);e.append(d,b);e.dataset.key=a;return e}function sanitizeQuotedString$$module$dist$dbgui(a){return a.replaceAll("\\","\\\\").replaceAll('"','\\"')}let dbgUISingleton$$module$dist$dbgui=new DbgUI$$module$dist$dbgui;
window.dbgui=()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{dbgUISingleton$$module$dist$dbgui._addToDocument()},{once:!0}):dbgUISingleton$$module$dist$dbgui._addToDocument();return dbgUISingleton$$module$dist$dbgui};const fontFace$$module$dist$dbgui=new FontFace("IBM Plex Mono","url(https://fonts.gstatic.com/s/ibmplexmono/v19/-F63fjptAgt5VM-kVkqdyU8n1i8q1w.woff2)");document.fonts.add(fontFace$$module$dist$dbgui);fontFace$$module$dist$dbgui.load();
var module$dist$dbgui={};
